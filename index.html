<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fiche Ã©lÃ¨ve â€“ RÃ©seaux (version ultra simple)</title>
  <style>
    :root{ --ink:#0b1220; --muted:#5b647a; --line:#e5e7eb; --bg:#f8fafc; --card:#ffffff; --danger:#ef4444; --ok:#15803d; }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial; color:var(--ink); background:var(--bg); }
    .wrap{ max-width: 900px; margin: 24px auto 80px; padding: 0 16px }
    h1{ margin:0 0 4px; font-size: clamp(1.3rem, 1.1rem + 1.2vw, 1.8rem) }
    p.lead{ margin:0 0 12px; color:var(--muted) }

    .card{ background:var(--card); border:1px solid var(--line); border-radius:12px; padding:14px; margin:12px 0 }
    .row2{ display:grid; grid-template-columns: 1fr 1fr; gap:12px }
    @media (max-width:720px){ .row2{ grid-template-columns:1fr } }

    label{ display:block; font-weight:600; margin:4px 0 6px }
    input[type="text"], textarea{ width:100%; font:inherit; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff }
    textarea{ min-height:110px; resize:vertical }
    .error{ border-color: var(--danger) !important; outline: 2px solid rgba(239,68,68,.12) }

    .q{ display:grid; gap:8px }
    .q h3{ margin:.2rem 0; font-size:1rem }
    .points{ color:var(--muted); font-weight:600; font-size:.95rem }

    .actions{ display:flex; gap:12px; align-items:center; justify-content:flex-end; margin-top:18px; flex-wrap:wrap }
    button{ appearance:none; border:1px solid var(--line); background:#fff; border-radius:10px; padding:10px 14px; cursor:pointer; font-weight:700 }
    .status{ color:var(--muted); font-size:.95rem }
    .ok{ color:var(--ok) }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Fiche Ã©lÃ¨ve â€“ RÃ©seaux informatiques</h1>
      <p class="lead">Version ultra simple, avec export PDF texte copiable des rÃ©ponses.</p>
    </header>

    <section class="card row2">
      <div>
        <label for="nom">Nom</label>
        <input id="nom" name="nom" type="text" placeholder="PrÃ©nom NOM" autocomplete="name" />
      </div>
      <div>
        <label for="classe">Classe</label>
        <input id="classe" name="classe" type="text" placeholder="ex. 5e B" />
      </div>
    </section>

    <section class="card q" id="q1">
      <h3>ğŸ–Šï¸ 1) Liste les nouveaux mots que tu viens d'apprendre dans la vidÃ©o. <span class="points">(2 points)</span></h3>
      <textarea id="r1" placeholder="Ã‰cris la liste de tes mots nouveauxâ€¦"></textarea>
    </section>

    <section class="card q" id="q2">
      <h3>ğŸ–Šï¸ 2) C'est quoi un rÃ©seau ? Explique avec tes mots (1â€“2 phrases). <span class="points">(3 points)</span></h3>
      <textarea id="r2" placeholder="Ta dÃ©finition personnelle du rÃ©seauâ€¦"></textarea>
    </section>

    <section class="card q" id="q3">
      <h3>ğŸ–Šï¸ 3) Qui est le Â« chef d'orchestre Â» du rÃ©seau ? <span class="points">(2 points)</span></h3>
      <textarea id="r3" placeholder="Nomme l'appareil et explique son rÃ´le en 1 phraseâ€¦"></textarea>
    </section>

    <section class="card q" id="q4">
      <h3>ğŸ–Šï¸ 4) Pourquoi a-t-on besoin d'une adresse IP ? <span class="points">(3 points)</span></h3>
      <textarea id="r4" placeholder="Explique l'utilitÃ© avec un petit exempleâ€¦"></textarea>
    </section>

    <section class="card q" id="q5">
      <h3>ğŸ–Šï¸ 5) Quel appareil permet de relier plusieurs ordinateurs ensemble ? <span class="points">(2 points)</span></h3>
      <textarea id="r5" placeholder="Nom de l'appareil et image mentale (place du village)â€¦"></textarea>
    </section>

    <section class="card q" id="q6">
      <h3>ğŸ–Šï¸ 6) Comment circulent les messages sur Internet ? <span class="points">(3 points)</span></h3>
      <textarea id="r6" placeholder="DÃ©cris le trajet simplementâ€¦"></textarea>
    </section>

    <section class="card q" id="q7">
      <h3>ğŸ–Šï¸ 7) DiffÃ©rence entre une adresse IP publique et une adresse IP privÃ©e ? <span class="points">(5 points)</span></h3>
      <textarea id="r7" placeholder="Explique la diffÃ©rence + mÃ©taphore (immeuble/appartements)â€¦"></textarea>
    </section>

    <div class="actions">
      <button id="verifier" type="button">VÃ©rifier que tout est rempli</button>
      <button id="imprimer" type="button">ğŸ“„ Exporter mes rÃ©ponses en PDF</button>
      <span id="resultat" class="status" aria-live="polite"></span>
    </div>
  </div>

  <!-- jsPDF depuis CDN (lÃ©ger, pas de dÃ©pendances externes supplÃ©mentaires) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" referrerpolicy="no-referrer"></script>

  <script>
    // Champs Ã  contrÃ´ler
    const fields = ["nom","classe","r1","r2","r3","r4","r5","r6","r7"];
    const res = document.getElementById('resultat');

    function verifier(){
      const manquants = [];
      for (const id of fields){
        const el = document.getElementById(id);
        const val = (el.value||'').trim();
        if (!val){ manquants.push(labelFor(id)); el.classList.add('error'); }
        else { el.classList.remove('error'); }
      }
      if (manquants.length === 0){ res.textContent = 'Tout est rempli âœ”'; res.classList.add('ok'); }
      else { res.textContent = 'Champs Ã  complÃ©ter : ' + manquants.join(', '); res.classList.remove('ok'); }
    }

    function labelFor(id){
      const el = document.querySelector('label[for="'+id+'"]');
      return el ? (el.textContent || '').trim() : id;
    }

    document.getElementById('verifier').addEventListener('click', verifier);

    // === Export PDF texte avec retour Ã  la ligne + saut de page auto ===
    document.getElementById('imprimer').addEventListener('click', () => {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ unit: 'mm', format: 'a4', compress: true });

      // Dimensions dynamiques pour Ãªtre robuste si format/orientation change
      const pageWidth  = doc.internal.pageSize.getWidth();
      const pageHeight = doc.internal.pageSize.getHeight();

      const margin = 20;                  // marges haut/bas/gauche/droite
      const maxWidth = pageWidth - margin * 2; // largeur utile
      const lineGap = 6;                  // "hauteur" d'une ligne approximative
      let y = margin;

      // En-tÃªte
      const nom = (document.getElementById("nom").value || "").trim();
      const classe = (document.getElementById("classe").value || "").trim();

      doc.setFont('helvetica', 'normal');
      doc.setFontSize(16);
      y = writeBlock(doc, `RÃ©ponses â€“ Fiche RÃ©seaux`, margin, y, maxWidth, lineGap, { bold:false });
      doc.setFontSize(12);
      y = writeBlock(doc, `Nom : ${nom || 'â€”'}`, margin, y, maxWidth, lineGap);
      y = writeBlock(doc, `Classe : ${classe || 'â€”'}`, margin, y, maxWidth, lineGap);
      y += 2;

      // Corps : pour chaque textarea, on imprime l'Ã©noncÃ© court (h3) + la rÃ©ponse
      // NB: si tu veux "uniquement les rÃ©ponses", commente la ligne qui Ã©crit qLabel.
      const textAreas = ["r1","r2","r3","r4","r5","r6","r7"];

      for (const id of textAreas){
        const area = document.getElementById(id);
        const section = area.closest('.q');
        const h3 = section ? section.querySelector('h3') : null;
        const qLabel = h3 ? (h3.innerText || '').trim() : id.toUpperCase();

        // Question (Ã©tiquette)
        doc.setFontSize(12);
        y = writeBlock(doc, qLabel, margin, y, maxWidth, lineGap, { bold:true });

        // RÃ©ponse (texte copiable)
        const val = (area.value || '').trim() || '(vide)';
        y = writeBlock(doc, val, margin + 5, y, maxWidth - 5, lineGap);
        y += 2; // petit espace entre questions
      }

      doc.save(`reponses_${(nom || 'eleve').replace(/\s+/g,'_')}.pdf`);

      // ---- Helpers ----
      function writeBlock(doc, text, x, yPos, width, lineH, opts = {}){
        const { bold = false, size } = opts;
        if (size) doc.setFontSize(size);
        doc.setFont('helvetica', bold ? 'bold' : 'normal');

        // DÃ©coupage du texte Ã  la largeur utile
        const lines = doc.splitTextToSize(String(text), width);
        // Gestion du saut de page si nÃ©cessaire
        const needed = lines.length * lineH;
        if (yPos + needed > pageHeight - margin){
          doc.addPage();
          yPos = margin;
        }
        doc.text(lines, x, yPos, { baseline: 'top' });
        return yPos + needed;
      }
    });
  </script>
</body>
</html>


